# ğŸ“Š Schema Visuale Sistema RAG - Vista Semplificata

## ğŸ¯ I 3 Componenti Principali

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                             â”‚
â”‚  1ï¸âƒ£  OPEN WEBUI (localhost:3000)                           â”‚
â”‚      "L'interfaccia di chat dove parli con i documenti"    â”‚
â”‚                                                             â”‚
â”‚      [ğŸ’¬ Scrivi qui la tua domanda]                        â”‚
â”‚      [ğŸ“¤ Invia]                                            â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â”‚ "Cos'Ã¨ RAG?"
                       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                             â”‚
â”‚  2ï¸âƒ£  API SERVER (localhost:8000)                           â”‚
â”‚      "Il cervello che cerca e genera risposte"             â”‚
â”‚                                                             â”‚
â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚      â”‚ ğŸ” RETRIEVER                        â”‚              â”‚
â”‚      â”‚ "Cerca nei documenti"               â”‚              â”‚
â”‚      â”‚                                     â”‚              â”‚
â”‚      â”‚ Domanda â†’ Embedding â†’ Cerca simili â”‚              â”‚
â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                    â”‚                                       â”‚
â”‚                    â”‚ Top 5 chunk rilevanti                â”‚
â”‚                    â†“                                       â”‚
â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚      â”‚ ğŸ¤– GEMINI LLM                       â”‚              â”‚
â”‚      â”‚ "Genera la risposta"                â”‚              â”‚
â”‚      â”‚                                     â”‚              â”‚
â”‚      â”‚ Chunk + Domanda â†’ Risposta          â”‚              â”‚
â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â”‚ Legge indice da disco
                       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                             â”‚
â”‚  3ï¸âƒ£  STORAGE (File System)                                 â”‚
â”‚      "Dove sono salvati documenti e indice"                â”‚
â”‚                                                             â”‚
â”‚      ğŸ“ documents/                                         â”‚
â”‚         â”œâ”€ manuale.pdf                                     â”‚
â”‚         â”œâ”€ guida.pdf                                       â”‚
â”‚         â””â”€ faq.txt                                         â”‚
â”‚                                                             â”‚
â”‚      ğŸ“ storage/                                           â”‚
â”‚         â””â”€ [indice vettoriale]                             â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                             â”‚
â”‚  ğŸ”§ ADMIN PANEL (localhost:8080)                           â”‚
â”‚      "Dove carichi e gestisci i documenti"                 â”‚
â”‚                                                             â”‚
â”‚      [ğŸ“¤ Drag & Drop PDF qui]                             â”‚
â”‚      [ğŸ”„ Reindicizza]                                      â”‚
â”‚      [ğŸ“Š Statistiche]                                      â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Flusso Completo: Dalla Domanda alla Risposta

```
STEP 1: Utente scrive domanda
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Open WebUI                       â”‚
â”‚ ğŸ’¬ "Come configuro il sistema?"  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”‚ HTTP POST
             â†“
STEP 2: API Server riceve richiesta
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ API Server                       â”‚
â”‚ ğŸ“¨ Ricevuta domanda              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”‚ Passa a Retriever
             â†“
STEP 3: Retriever cerca documenti rilevanti
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Retriever                        â”‚
â”‚ 1. Converte domanda in vettore   â”‚
â”‚    "Come configuro..." â†’ [0.2,   â”‚
â”‚     0.5, 0.8, ...]               â”‚
â”‚                                  â”‚
â”‚ 2. Cerca vettori simili in       â”‚
â”‚    ./storage/                    â”‚
â”‚                                  â”‚
â”‚ 3. Trova top 5 chunk:            â”‚
â”‚    - manuale.pdf pag.12 (0.89)   â”‚
â”‚    - guida.pdf pag.5 (0.76)      â”‚
â”‚    - faq.txt riga 45 (0.71)      â”‚
â”‚    - ...                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”‚ Passa chunk a LLM
             â†“
STEP 4: Gemini genera risposta
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Gemini LLM                       â”‚
â”‚                                  â”‚
â”‚ INPUT:                           â”‚
â”‚ - Domanda: "Come configuro..."   â”‚
â”‚ - Chunk 1: "Per configurare..."  â”‚
â”‚ - Chunk 2: "I parametri sono..." â”‚
â”‚ - Chunk 3: "Segui questi step..."â”‚
â”‚                                  â”‚
â”‚ OUTPUT:                          â”‚
â”‚ "Per configurare il sistema      â”‚
â”‚  segui questi passaggi:          â”‚
â”‚  1. Apri il file config.ini      â”‚
â”‚  2. Modifica il parametro X      â”‚
â”‚  3. Riavvia il servizio"         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”‚ Restituisce risposta
             â†“
STEP 5: API Server formatta e invia
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ API Server                       â”‚
â”‚ ğŸ“¤ Risposta + Fonti              â”‚
â”‚                                  â”‚
â”‚ {                                â”‚
â”‚   "answer": "Per configurare..." â”‚
â”‚   "sources": [                   â”‚
â”‚     "manuale.pdf pag.12",        â”‚
â”‚     "guida.pdf pag.5"            â”‚
â”‚   ]                              â”‚
â”‚ }                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”‚ HTTP Response
             â†“
STEP 6: Open WebUI mostra risposta
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Open WebUI                       â”‚
â”‚                                  â”‚
â”‚ ğŸ¤– Per configurare il sistema    â”‚
â”‚    segui questi passaggi:        â”‚
â”‚    1. Apri il file config.ini    â”‚
â”‚    2. Modifica il parametro X    â”‚
â”‚    3. Riavvia il servizio        â”‚
â”‚                                  â”‚
â”‚ ğŸ“š Fonti:                        â”‚
â”‚    â€¢ manuale.pdf (pag. 12)       â”‚
â”‚    â€¢ guida.pdf (pag. 5)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â±ï¸ Tempo totale: 2-5 secondi
```

---

## ğŸ“¤ Flusso Upload e Indicizzazione

```
STEP 1: Admin carica PDF
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Admin Panel                      â”‚
â”‚ ğŸ“ Drag & Drop: manuale.pdf      â”‚
â”‚ [Carica Documenti]               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”‚ Upload file
             â†“
STEP 2: File salvato su disco
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ File System                      â”‚
â”‚ ğŸ’¾ ./documents/manuale.pdf       â”‚
â”‚    (salvato)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”‚ Admin clicca "Reindicizza"
             â†“
STEP 3: Admin Panel chiama API
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Admin Panel                      â”‚
â”‚ ğŸ“ POST /reload                  â”‚
â”‚    â†’ localhost:8000              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”‚ HTTP Request
             â†“
STEP 4: API Server legge documenti
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ API Server                       â”‚
â”‚ ğŸ“– Legge ./documents/            â”‚
â”‚    - manuale.pdf (100 pagine)    â”‚
â”‚    - guida.pdf (50 pagine)       â”‚
â”‚    - faq.txt (200 righe)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”‚ Divide in chunk
             â†“
STEP 5: Chunking (divisione testo)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LlamaIndex                       â”‚
â”‚                                  â”‚
â”‚ manuale.pdf â†’ 500 chunk          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Chunk 1 (512 caratteri)    â”‚   â”‚
â”‚ â”‚ "Il sistema RAG permette..." â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Chunk 2 (512 caratteri)    â”‚   â”‚
â”‚ â”‚ "Per configurare seguire..."â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚ ...                              â”‚
â”‚ (500 chunk totali)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”‚ Genera embeddings
             â†“
STEP 6: Embedding (vettorizzazione)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Gemini Embedding API             â”‚
â”‚                                  â”‚
â”‚ Per ogni chunk:                  â”‚
â”‚ Testo â†’ Vettore (768 dimensioni) â”‚
â”‚                                  â”‚
â”‚ Chunk 1: "Il sistema RAG..."     â”‚
â”‚    â†“                             â”‚
â”‚ [0.23, 0.45, 0.12, 0.89, ...]    â”‚
â”‚                                  â”‚
â”‚ Chunk 2: "Per configurare..."    â”‚
â”‚    â†“                             â”‚
â”‚ [0.67, 0.21, 0.33, 0.54, ...]    â”‚
â”‚                                  â”‚
â”‚ ... (500 vettori)                â”‚
â”‚                                  â”‚
â”‚ â±ï¸ Tempo: ~1-2 minuti            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”‚ Salva indice
             â†“
STEP 7: Salvataggio indice
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ File System                      â”‚
â”‚ ğŸ’¾ ./storage/                    â”‚
â”‚    â”œâ”€ docstore.json              â”‚
â”‚    â”œâ”€ index_store.json           â”‚
â”‚    â”œâ”€ vector_store.json          â”‚
â”‚    â””â”€ ...                        â”‚
â”‚                                  â”‚
â”‚ (500 chunk + 500 vettori)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”‚ Conferma
             â†“
STEP 8: Messaggio di successo
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Admin Panel                      â”‚
â”‚ âœ… Reindicizzazione completata!  â”‚
â”‚    Sistema pronto!               â”‚
â”‚                                  â”‚
â”‚ ğŸ“Š Statistiche:                  â”‚
â”‚    - 3 documenti                 â”‚
â”‚    - 500 chunks                  â”‚
â”‚    - Indice: Online              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

âœ… Ora puoi chattare con i documenti!
```

---

## ğŸ–¥ï¸ Vista Fisica: Cosa Gira sul Tuo Computer

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    IL TUO COMPUTER                          â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ PROCESSO 1: python api_server.py                     â”‚  â”‚
â”‚  â”‚ Porta: 8000                                          â”‚  â”‚
â”‚  â”‚ RAM: ~500 MB                                         â”‚  â”‚
â”‚  â”‚ CPU: 5-10% (idle), 50-80% (durante query)           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ PROCESSO 2: python admin_panel.py                    â”‚  â”‚
â”‚  â”‚ Porta: 8080                                          â”‚  â”‚
â”‚  â”‚ RAM: ~200 MB                                         â”‚  â”‚
â”‚  â”‚ CPU: 1-5%                                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ DOCKER CONTAINER: open-webui                         â”‚  â”‚
â”‚  â”‚ Porta: 3000                                          â”‚  â”‚
â”‚  â”‚ RAM: ~300 MB                                         â”‚  â”‚
â”‚  â”‚ CPU: 5-10%                                           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ FILE SYSTEM                                          â”‚  â”‚
â”‚  â”‚ ./documents/    ~10-100 MB (i tuoi PDF)             â”‚  â”‚
â”‚  â”‚ ./storage/      ~50-500 MB (indice vettoriale)      â”‚  â”‚
â”‚  â”‚ ./admin.db      ~1 MB (database SQLite)             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚  ğŸ’¾ Spazio disco totale: ~100-700 MB                       â”‚
â”‚  ğŸ§  RAM totale: ~1 GB                                      â”‚
â”‚  âš¡ CPU: Variabile (picchi durante indicizzazione)         â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    INTERNET / CLOUD                         â”‚
â”‚                                                             â”‚
â”‚  â˜ï¸ Google Gemini API                                      â”‚
â”‚     - Genera embeddings                                    â”‚
â”‚     - Genera risposte                                      â”‚
â”‚     - Quota gratuita: 15 req/min                           â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”Œ Mappa delle Porte

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                             â”‚
â”‚  localhost:3000  â†â†’  Open WebUI (Docker)                   â”‚
â”‚       â†“                                                     â”‚
â”‚       â”‚ Chiama API                                         â”‚
â”‚       â†“                                                     â”‚
â”‚  localhost:8000  â†â†’  API Server (Python)                   â”‚
â”‚       â†“                                                     â”‚
â”‚       â”‚ Legge/Scrive                                       â”‚
â”‚       â†“                                                     â”‚
â”‚  ./storage/      â†â†’  Indice Vettoriale (Disco)             â”‚
â”‚  ./documents/    â†â†’  PDF Caricati (Disco)                  â”‚
â”‚                                                             â”‚
â”‚  localhost:8080  â†â†’  Admin Panel (Python)                  â”‚
â”‚       â†“                                                     â”‚
â”‚       â”‚ Carica file in                                     â”‚
â”‚       â†“                                                     â”‚
â”‚  ./documents/    â†â†’  PDF Caricati (Disco)                  â”‚
â”‚       â†“                                                     â”‚
â”‚       â”‚ Chiama per reindicizzare                           â”‚
â”‚       â†“                                                     â”‚
â”‚  localhost:8000  â†â†’  API Server /reload                    â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¬ Sequenza di Avvio (Timeline)

```
T=0s   ğŸš€ Esegui: start_all.bat
       â”‚
T=1s   â”œâ”€ Avvia CMD 1: python api_server.py
       â”‚  â””â”€ Carica librerie Python
       â”‚
T=2s   â”œâ”€ Avvia CMD 2: python admin_panel.py
       â”‚  â””â”€ Carica librerie Python
       â”‚
T=3s   â”‚  âœ… API Server: Carica API Key da .env
       â”‚
T=4s   â”‚  âœ… API Server: Configura Gemini LLM
       â”‚
T=5s   â”‚  âœ… API Server: Carica indice da ./storage/
       â”‚
T=6s   â”‚  âœ… API Server: Query engine pronto
       â”‚  âœ… Admin Panel: Database pronto
       â”‚
T=7s   â”œâ”€ Verifica Docker Desktop
       â”‚  â””â”€ docker info
       â”‚
T=8s   â”œâ”€ Avvia container Open WebUI
       â”‚  â””â”€ docker run open-webui
       â”‚
T=9s   â”‚  â³ Docker: Download immagine (solo prima volta)
       â”‚
T=15s  â”‚  âœ… Open WebUI: Container in esecuzione
       â”‚
T=16s  âœ… TUTTO PRONTO!
       â”‚
       â””â”€ Mostra riepilogo:
          â€¢ Open WebUI:    http://localhost:3000
          â€¢ Admin Panel:   http://localhost:8080
          â€¢ RAG API:       http://localhost:8000
```

---

## ğŸ“Š Cosa Succede Durante una Query (Timeline)

```
T=0ms    ğŸ‘¤ Utente scrive: "Cos'Ã¨ RAG?"
         â”‚
T=10ms   ğŸ“¤ Open WebUI invia HTTP POST
         â”‚  â†’ http://localhost:8000/v1/chat/completions
         â”‚
T=20ms   ğŸ“¨ API Server riceve richiesta
         â”‚
T=30ms   ğŸ” Retriever: Converte domanda in vettore
         â”‚  â†’ Chiama Gemini Embedding API
         â”‚
T=500ms  â˜ï¸ Gemini restituisce embedding
         â”‚  â†’ [0.23, 0.45, 0.12, ...]
         â”‚
T=510ms  ğŸ” Retriever: Cerca vettori simili in ./storage/
         â”‚  â†’ Similarity search (cosine similarity)
         â”‚
T=550ms  ğŸ“‹ Retriever: Trova top 5 chunk
         â”‚  1. intro.pdf pag.1 (score: 0.92)
         â”‚  2. guida.pdf pag.3 (score: 0.87)
         â”‚  3. faq.txt riga 12 (score: 0.81)
         â”‚  4. manuale.pdf pag.5 (score: 0.76)
         â”‚  5. doc.txt riga 45 (score: 0.71)
         â”‚
T=560ms  ğŸ¤– Gemini LLM: Riceve domanda + chunk
         â”‚  â†’ Chiama Gemini Generate API
         â”‚
T=2000ms â˜ï¸ Gemini genera risposta
         â”‚  â†’ "RAG (Retrieval-Augmented Generation)
         â”‚      Ã¨ una tecnica che combina..."
         â”‚
T=2010ms ğŸ“¤ API Server formatta risposta + fonti
         â”‚
T=2020ms ğŸ’¬ Open WebUI mostra risposta all'utente
         â”‚
T=2030ms âœ… COMPLETATO!

â±ï¸ Tempo totale: ~2 secondi
```

---

## ğŸ¯ Punti Chiave da Ricordare

```
1. ğŸ”‘ API KEY
   â””â”€ Deve essere in .env
   â””â”€ Senza questa, niente funziona!

2. ğŸ³ DOCKER
   â””â”€ Deve essere APERTO e VERDE
   â””â”€ Solo per Open WebUI

3. ğŸ“ DOCUMENTI
   â””â”€ Vanno in ./documents/
   â””â”€ Dopo upload â†’ REINDICIZZA!

4. ğŸ”„ REINDICIZZAZIONE
   â””â”€ Ora Ã¨ AUTOMATICA!
   â””â”€ Clicca e attendi ~1 minuto

5. ğŸ’¬ CHAT
   â””â”€ Seleziona modello "rag-gemini"
   â””â”€ Risposte basate SOLO sui tuoi documenti
```

---

**Creato**: 2025-12-03  
**Versione**: 1.0 - Schema Visuale
